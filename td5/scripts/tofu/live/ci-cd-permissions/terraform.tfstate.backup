{"version":4,"terraform_version":"1.10.7","serial":1,"lineage":"f4d64953-5f4f-e902-1801-123d89aa69a0","outputs":{"lambda_deploy_apply_role_arn":{"value":"arn:aws:iam::654211779529:role/lambda-sample-apply","type":"string"},"lambda_deploy_plan_role_arn":{"value":"arn:aws:iam::654211779529:role/lambda-sample-plan","type":"string"},"lambda_test_role_arn":{"value":"arn:aws:iam::654211779529:role/lambda-sample-tests","type":"string"}},"resources":[{"module":"module.iam_roles","mode":"data","type":"aws_iam_policy_document","name":"github_assume_role","provider":"module.iam_roles.provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"id":"1831749097","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRoleWithWebIdentity\",\n      \"Principal\": {\n        \"Federated\": \"arn:aws:iam::654211779529:oidc-provider/token.actions.githubusercontent.com\"\n      },\n      \"Condition\": {\n        \"StringEquals\": {\n          \"token.actions.githubusercontent.com:aud\": \"sts.amazonaws.com\",\n          \"token.actions.githubusercontent.com:sub\": \"repo:YoussefJ04/lab5:*\"\n        }\n      }\n    }\n  ]\n}","minified_json":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"sts:AssumeRoleWithWebIdentity\",\"Principal\":{\"Federated\":\"arn:aws:iam::654211779529:oidc-provider/token.actions.githubusercontent.com\"},\"Condition\":{\"StringEquals\":{\"token.actions.githubusercontent.com:aud\":\"sts.amazonaws.com\",\"token.actions.githubusercontent.com:sub\":\"repo:YoussefJ04/lab5:*\"}}}]}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRoleWithWebIdentity"],"condition":[{"test":"StringEquals","values":["repo:YoussefJ04/lab5:*"],"variable":"token.actions.githubusercontent.com:sub"},{"test":"StringEquals","values":["sts.amazonaws.com"],"variable":"token.actions.githubusercontent.com:aud"}],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["arn:aws:iam::654211779529:oidc-provider/token.actions.githubusercontent.com"],"type":"Federated"}],"resources":[],"sid":""}],"version":"2012-10-17"},"sensitive_attributes":[]}]},{"module":"module.iam_roles","mode":"managed","type":"aws_iam_role","name":"apply","provider":"module.iam_roles.provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"index_key":0,"schema_version":0,"attributes":{"arn":"arn:aws:iam::654211779529:role/lambda-sample-apply","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRoleWithWebIdentity\",\"Condition\":{\"StringEquals\":{\"token.actions.githubusercontent.com:aud\":\"sts.amazonaws.com\",\"token.actions.githubusercontent.com:sub\":\"repo:YoussefJ04/lab5:*\"}},\"Effect\":\"Allow\",\"Principal\":{\"Federated\":\"arn:aws:iam::654211779529:oidc-provider/token.actions.githubusercontent.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-11-26T23:12:41Z","description":"","force_detach_policies":false,"id":"lambda-sample-apply","inline_policy":[],"managed_policy_arns":[],"max_session_duration":3600,"name":"lambda-sample-apply","name_prefix":"","path":"/","permissions_boundary":"","tags":null,"tags_all":{},"unique_id":"AROAZQUQPRPEXXJD2HPD2"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["module.iam_roles.data.aws_iam_policy_document.github_assume_role","module.oidc_provider.aws_iam_openid_connect_provider.this"]}]},{"module":"module.iam_roles","mode":"managed","type":"aws_iam_role","name":"plan","provider":"module.iam_roles.provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"index_key":0,"schema_version":0,"attributes":{"arn":"arn:aws:iam::654211779529:role/lambda-sample-plan","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRoleWithWebIdentity\",\"Condition\":{\"StringEquals\":{\"token.actions.githubusercontent.com:aud\":\"sts.amazonaws.com\",\"token.actions.githubusercontent.com:sub\":\"repo:YoussefJ04/lab5:*\"}},\"Effect\":\"Allow\",\"Principal\":{\"Federated\":\"arn:aws:iam::654211779529:oidc-provider/token.actions.githubusercontent.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-11-26T23:12:41Z","description":"","force_detach_policies":false,"id":"lambda-sample-plan","inline_policy":[],"managed_policy_arns":[],"max_session_duration":3600,"name":"lambda-sample-plan","name_prefix":"","path":"/","permissions_boundary":"","tags":null,"tags_all":{},"unique_id":"AROAZQUQPRPESGERD4UEC"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["module.iam_roles.data.aws_iam_policy_document.github_assume_role","module.oidc_provider.aws_iam_openid_connect_provider.this"]}]},{"module":"module.iam_roles","mode":"managed","type":"aws_iam_role","name":"test","provider":"module.iam_roles.provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"index_key":0,"schema_version":0,"attributes":{"arn":"arn:aws:iam::654211779529:role/lambda-sample-tests","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRoleWithWebIdentity\",\"Condition\":{\"StringEquals\":{\"token.actions.githubusercontent.com:aud\":\"sts.amazonaws.com\",\"token.actions.githubusercontent.com:sub\":\"repo:YoussefJ04/lab5:*\"}},\"Effect\":\"Allow\",\"Principal\":{\"Federated\":\"arn:aws:iam::654211779529:oidc-provider/token.actions.githubusercontent.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-11-26T23:12:41Z","description":"","force_detach_policies":false,"id":"lambda-sample-tests","inline_policy":[],"managed_policy_arns":[],"max_session_duration":3600,"name":"lambda-sample-tests","name_prefix":"","path":"/","permissions_boundary":"","tags":null,"tags_all":{},"unique_id":"AROAZQUQPRPES3GLKPUYD"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["module.iam_roles.data.aws_iam_policy_document.github_assume_role","module.oidc_provider.aws_iam_openid_connect_provider.this"]}]},{"module":"module.iam_roles","mode":"managed","type":"aws_iam_role_policy_attachment","name":"apply_admin","provider":"module.iam_roles.provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"index_key":0,"schema_version":0,"attributes":{"id":"lambda-sample-apply/arn:aws:iam::aws:policy/AdministratorAccess","policy_arn":"arn:aws:iam::aws:policy/AdministratorAccess","role":"lambda-sample-apply"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["module.iam_roles.aws_iam_role.apply","module.iam_roles.data.aws_iam_policy_document.github_assume_role","module.oidc_provider.aws_iam_openid_connect_provider.this"]}]},{"module":"module.iam_roles","mode":"managed","type":"aws_iam_role_policy_attachment","name":"plan_admin","provider":"module.iam_roles.provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"index_key":0,"schema_version":0,"attributes":{"id":"lambda-sample-plan/arn:aws:iam::aws:policy/AdministratorAccess","policy_arn":"arn:aws:iam::aws:policy/AdministratorAccess","role":"lambda-sample-plan"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["module.iam_roles.aws_iam_role.plan","module.iam_roles.data.aws_iam_policy_document.github_assume_role","module.oidc_provider.aws_iam_openid_connect_provider.this"]}]},{"module":"module.iam_roles","mode":"managed","type":"aws_iam_role_policy_attachment","name":"test_admin","provider":"module.iam_roles.provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"index_key":0,"schema_version":0,"attributes":{"id":"lambda-sample-tests/arn:aws:iam::aws:policy/AdministratorAccess","policy_arn":"arn:aws:iam::aws:policy/AdministratorAccess","role":"lambda-sample-tests"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["module.iam_roles.aws_iam_role.test","module.iam_roles.data.aws_iam_policy_document.github_assume_role","module.oidc_provider.aws_iam_openid_connect_provider.this"]}]},{"module":"module.oidc_provider","mode":"managed","type":"aws_iam_openid_connect_provider","name":"this","provider":"module.oidc_provider.provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:iam::654211779529:oidc-provider/token.actions.githubusercontent.com","client_id_list":["sts.amazonaws.com"],"id":"arn:aws:iam::654211779529:oidc-provider/token.actions.githubusercontent.com","tags":null,"tags_all":{},"thumbprint_list":["6938fd4d98bab03faadb97b34396831e3780aea1"],"url":"token.actions.githubusercontent.com"},"sensitive_attributes":[],"private":"bnVsbA=="}]}],"check_results":null}
